<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QNG6YB9XFY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QNG6YB9XFY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body{text-align: center;}
        #enterDetails{float: left; width: 50%; background-color: bisque; color: black;}
        #findDetails{float: left; width: 50%; background-color: darkslategray; color: black;}
        #findDetails2{float: right; width: 50%; background-color: darkslategray; color: black;}
        img{width: 50%;}
        input{width: 120px;}
        #banner{width: 100%;}
    </style>
</head>
<body>
    <img id="banner" src = "https://i.imgur.com/eujTdJt.png">
    <!--
    <div id="enterDetails"> 
        <h1>Enter Details</h1>
        <h4>ID</h4>
        <input id ="enterID" type ="text">

        <h4>Name</h4>
        <input id="enterName" type="text">
        
        <h4>Age</h4>
        <input id="enterAge" type="number"><br><br>

        <button id="insert">INSERT</button>
        <button id="update">UPDATE</button>
        <button id="remove">REMOVE</button>
    </div>
    -->

    <div id = "findDetails">
        <h1>Find By ID</h1>
        <h4>ID COPY THIS: <br> nYPpuJ1YqKdCJiiWmTFMOyjeMqA3</h4>
        <input id ="findID" type ="text"><br><br>
        <button id="find">FIND</button>

        <h3 id="findName" type="text"></h3>
        <!--This is description for now-->
        <h3 id="findDescription" type="text"></h3> <br><br>

        <img id="img" src="">

    </div>

    <div id = "findDetails2">
        <h1>Find By ID</h1>
        <h4>ID COPY THIS: <br> nWbb0gFuotfKcAWZqLGAcR94hY22</h4>
        <input id ="findID2" type ="text"><br><br>
        <button id="find2">FIND</button>

        <h3 id="findName2" type="text"></h3>
        <!--This is description for now-->
        <h3 id="findDescription2" type="text"></h3> <br><br>

        <img id="img2" src="">
    </div>


    <iframe src="https://thunkable.site/w/hO9SchMs0nk43-4J30sfr" 
    title="Profile App" height = 750 width = 500></iframe>


    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCG5tGznSd4eZbkFEYzXoNK9aCSDRDovwk",
          authDomain: "profileapp-9663e.firebaseapp.com",
          databaseURL: "https://profileapp-9663e-default-rtdb.firebaseio.com",
          projectId: "profileapp-9663e",
          storageBucket: "profileapp-9663e.appspot.com",
          messagingSenderId: "490361544108",
          appId: "1:490361544108:web:bf8578fa80baa4ac596e09",
          measurementId: "G-QPCR1CNY7P"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        import{getDatabase, set, get, update, remove, ref, child}
        from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

        const db = getDatabase();
        

        //HTML decleration
        var enterID = document.getElementById("enterID");
        var enterName = document.getElementById("enterName");
        var enterAge = document.getElementById("enterAge");
        var findID = document.getElementById("findID")
        var findName = document.getElementById("findName")
        var findDescription =  document.getElementById("findDescription")
        var image = document.getElementById("img")

        //for second div
        var findID2 = document.getElementById("findID2")
        var findName2 = document.getElementById("findName2")
        var findDescription2 =  document.getElementById("findDescription2")
        var findBtn2 = document.getElementById("find2")
        var image2 = document.getElementById("img2")

        //Button Decleration
        var insertBtn = document.getElementById("insert")
        var updateBtn = document.getElementById("update")
        var removeBtn = document.getElementById("remove")
        var findBtn = document.getElementById("find")

        
        /*
        function InsertData(){
            set(ref(db, "People/" + "null"),{
                Name: enterName.value,
                ID: enterID.value,
                Age: enterAge.value,
            })

        }
        */

        function FindData(){
            const dbref = ref(db);

            get(child(dbref,findID.value))
            .then((snapshot)=>{
                if (snapshot.exists()){
                    findName.innerHTML = "Name: " + snapshot.val().name;
                    findDescription.innerHTML = "Description: " + snapshot.val().description;
                    image.src = snapshot.val().image
                }else{
                    alert("No Data Found")
                }
            })
            .catch((error)=>{
                alert(error)
            })
        }
            function FindData2(){
            const dbref = ref(db);

            get(child(dbref,findID2.value))
            .then((snapshot)=>{
                if (snapshot.exists()){
                    findName2.innerHTML = "Name: " + snapshot.val().name;
                    findDescription2.innerHTML = "Description: " + snapshot.val().description;
                    image2.src = snapshot.val().image
                }else{
                    alert("No Data Found")
                }
            })
            .catch((error)=>{
                alert(error)
            })

        }

        /*
        function UpdateData(){

        }

        function RemoveData(){

        }
        */

        //insertBtn.addEventListener('click', InsertData);
        //updateBtn.addEventListener('click', UpdateData);
        //removeBtn.addEventListener('click', RemoveData);
        findBtn.addEventListener('click', FindData);
        findBtn2.addEventListener('click', FindData2);

      </script>
</body>
</html>